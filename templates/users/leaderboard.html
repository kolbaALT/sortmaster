{% extends 'base.html' %}

{% block content %}
<div class="row">
    <div class="col-lg-8 mx-auto">
        <h2 class="mb-4"><i class="bi bi-trophy"></i> –†–µ–π—Ç–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>

        <div class="card">
            <div class="card-body">
                {% if top_users %}
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>–ú–µ—Å—Ç–æ</th>
                                    <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                                    <th>–û—á–∫–∏</th>
                                    <th>–û–±–Ω–æ–≤–ª–µ–Ω–æ</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for rating in top_users %}
                                <tr {% if rating.user == user %}class="table-primary"{% endif %}>
                                    <td>
                                        {% if rating.position <= 3 %}
                                            {% if rating.position == 1 %}ü•á{% elif rating.position == 2 %}ü•à{% else %}ü•â{% endif %}
                                        {% endif %}
                                        {{ rating.position }}
                                    </td>
                                    <td>
                                        {% if rating.user.avatar %}
                                            <img src="{{ rating.user.avatar.url }}" class="rounded-circle me-2" width="30" height="30">
                                        {% endif %}
                                        {{ rating.user.first_name|default:rating.user.username }}
                                    </td>
                                    <td><strong>{{ rating.rating_points }}</strong></td>
                                    <td class="text-muted">{{ rating.updated_at|date:"d.m.Y" }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% else %}
                    <p class="text-center text-muted">–†–µ–π—Ç–∏–Ω–≥ –ø–æ–∫–∞ –ø—É—Å—Ç. –ë—É–¥—å –ø–µ—Ä–≤—ã–º!</p>
                {% endif %}
            </div>
        </div>

        <div class="text-center mt-3">
            <a href="{% url 'challenges:list' %}" class="btn btn-primary">
                <i class="bi bi-trophy"></i> –£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —á–µ–ª–ª–µ–Ω–¥–∂–∞—Ö
            </a>
        </div>
    </div>
</div>
{% endblock %}
